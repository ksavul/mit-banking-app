{"ast":null,"code":"import _objectSpread from\"/Users/fastnet/devedu/MIT/banking-application-fe/banking-app/mit-banking-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/fastnet/devedu/MIT/banking-application-fe/banking-app/mit-banking-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import useUserContext from\"../hooks/useUserContext\";import{useFormik}from\"formik\";import*as yup from\"yup\";import{Button,TextField,Box}from\"@mui/material\";import{toast}from\"react-toastify\";import createTransaction from\"../helpers/createTransaction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Deposit=function Deposit(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isDisabled=_useState2[0],setIsDisabled=_useState2[1];var _useUserContext=useUserContext(),user=_useUserContext.user,setUser=_useUserContext.setUser,loggedInUser=_useUserContext.loggedInUser,setLoggedInUser=_useUserContext.setLoggedInUser;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),balance=_useState4[0],setBalance=_useState4[1];var validationSchema=yup.object({depositAmount:yup.number().min(1,\"Must be greater or equal than $1\").required(\"Deposit Amount is required\").typeError(\"The deposit amount must be a number\")});var formik=useFormik({initialValues:{depositAmount:\"\"},validationSchema:validationSchema,onSubmit:function onSubmit(){//Verify if there's logged in user\nif(!loggedInUser){toast.error(\"Please login to make a successful transaction\");return;}var depAmount=parseFloat(formik.values.depositAmount);var newBalance=0;var newData=user.map(function(u){if(u.email===loggedInUser.email){u.balance+=depAmount;newBalance=u.balance;var newTransaction=createTransaction(\"Deposit\",depAmount);u.transactionHistory.push(newTransaction);setBalance(u.balance);}return u;});setUser(newData);setLoggedInUser(function(prev){return _objectSpread(_objectSpread({},prev),{},{balance:newBalance});});formik.resetForm();toast.success(\"Deposit successful\");return;}});//Get initial balance\nuseEffect(function(){if(loggedInUser){setBalance(loggedInUser.balance);}},[loggedInUser]);//Listen for formik values changes\nuseEffect(function(){var depositAmount=formik.values.depositAmount;if(depositAmount.trim().length>0){setIsDisabled(false);}else{setIsDisabled(true);}},[formik.values]);var customStyles={width:\"fit-content\"};return/*#__PURE__*/_jsx(_Fragment,{children:!loggedInUser?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Deposit\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please login to your account\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:customStyles,children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Deposit\"}),/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[\"Balance \",/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",balance]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Box,{m:2,children:/*#__PURE__*/_jsx(TextField,{className:\"text-box custom-input-box\",id:\"depositAmount\",name:\"depositAmount\",label:\"Deposit Amount\",value:formik.values.depositAmount,onChange:formik.handleChange,error:formik.touched.depositAmount&&Boolean(formik.errors.depositAmount),helperText:formik.touched.depositAmount&&formik.errors.depositAmount})}),/*#__PURE__*/_jsx(Box,{m:2,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:formik.handleSubmit,disabled:isDisabled,children:\"Deposit\"})})]})]})})});};export default Deposit;","map":{"version":3,"names":["useState","useEffect","useUserContext","useFormik","yup","Button","TextField","Box","toast","createTransaction","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Deposit","_useState","_useState2","_slicedToArray","isDisabled","setIsDisabled","_useUserContext","user","setUser","loggedInUser","setLoggedInUser","_useState3","_useState4","balance","setBalance","validationSchema","object","depositAmount","number","min","required","typeError","formik","initialValues","onSubmit","error","depAmount","parseFloat","values","newBalance","newData","map","u","email","newTransaction","transactionHistory","push","prev","_objectSpread","resetForm","success","trim","length","customStyles","width","children","className","style","m","id","name","label","value","onChange","handleChange","touched","Boolean","errors","helperText","variant","onClick","handleSubmit","disabled"],"sources":["/Users/fastnet/devedu/MIT/banking-application-fe/banking-app/mit-banking-app/src/components/Deposit.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport useUserContext from \"../hooks/useUserContext\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport { Button, TextField, Box } from \"@mui/material\";\nimport { toast } from \"react-toastify\";\n\nimport createTransaction from \"../helpers/createTransaction\";\n\nconst Deposit = () => {\n  const [isDisabled, setIsDisabled] = useState(true);\n  const { user, setUser, loggedInUser, setLoggedInUser } = useUserContext();\n  const [balance, setBalance] = useState();\n\n  const validationSchema = yup.object({\n    depositAmount: yup\n      .number()\n      .min(1, \"Must be greater or equal than $1\")\n      .required(\"Deposit Amount is required\")\n      .typeError(\"The deposit amount must be a number\"),\n  });\n\n  const formik = useFormik({\n    initialValues: {\n      depositAmount: \"\",\n    },\n\n    validationSchema: validationSchema,\n\n    onSubmit: () => {\n      //Verify if there's logged in user\n      if (!loggedInUser) {\n        toast.error(\"Please login to make a successful transaction\");\n        return;\n      }\n\n      const depAmount = parseFloat(formik.values.depositAmount);\n      let newBalance = 0;\n      const newData = user.map((u) => {\n        if (u.email === loggedInUser.email) {\n          u.balance += depAmount;\n          newBalance = u.balance;\n          const newTransaction = createTransaction(\"Deposit\", depAmount);\n          u.transactionHistory.push(newTransaction);\n          setBalance(u.balance);\n        }\n        return u;\n      });\n\n      setUser(newData);\n      setLoggedInUser((prev) => ({ ...prev, balance: newBalance }));\n      formik.resetForm();\n      toast.success(\"Deposit successful\");\n      return;\n    },\n  });\n\n  //Get initial balance\n  useEffect(() => {\n    if (loggedInUser) {\n      setBalance(loggedInUser.balance);\n    }\n  }, [loggedInUser]);\n\n  //Listen for formik values changes\n  useEffect(() => {\n    const { depositAmount } = formik.values;\n\n    if (depositAmount.trim().length > 0) {\n      setIsDisabled(false);\n    } else {\n      setIsDisabled(true);\n    }\n  }, [formik.values]);\n\n  const customStyles = {\n    width: \"fit-content\",\n  };\n\n  return (\n    <>\n      {!loggedInUser ? (\n        <>\n          <h3>Deposit</h3>\n          <p>Please login to your account</p>\n        </>\n      ) : (\n        <div className=\"card\" style={customStyles}>\n          <div className=\"card-body\">\n            <div className=\"row\">\n              <h4>Deposit</h4>\n              <h5 className=\"card-title\">\n                Balance <span>${balance}</span>\n              </h5>\n            </div>\n            <div>\n              <Box m={2}>\n                <TextField\n                  className=\"text-box custom-input-box\"\n                  id=\"depositAmount\"\n                  name=\"depositAmount\"\n                  label=\"Deposit Amount\"\n                  value={formik.values.depositAmount}\n                  onChange={formik.handleChange}\n                  error={\n                    formik.touched.depositAmount &&\n                    Boolean(formik.errors.depositAmount)\n                  }\n                  helperText={\n                    formik.touched.depositAmount && formik.errors.depositAmount\n                  }\n                />\n              </Box>\n              <Box m={2}>\n                <Button\n                  variant=\"contained\"\n                  onClick={formik.handleSubmit}\n                  disabled={isDisabled}\n                >\n                  Deposit\n                </Button>\n              </Box>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Deposit;\n"],"mappings":"mUAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,cAAc,KAAM,yBAAyB,CACpD,OAASC,SAAS,KAAQ,QAAQ,CAClC,MAAO,GAAK,CAAAC,GAAG,KAAM,KAAK,CAC1B,OAASC,MAAM,CAAEC,SAAS,CAAEC,GAAG,KAAQ,eAAe,CACtD,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,MAAO,CAAAC,iBAAiB,KAAM,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE7D,GAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CACpB,IAAAC,SAAA,CAAoCjB,QAAQ,CAAC,IAAI,CAAC,CAAAkB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA3CG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAChC,IAAAI,eAAA,CAAyDpB,cAAc,CAAC,CAAC,CAAjEqB,IAAI,CAAAD,eAAA,CAAJC,IAAI,CAAEC,OAAO,CAAAF,eAAA,CAAPE,OAAO,CAAEC,YAAY,CAAAH,eAAA,CAAZG,YAAY,CAAEC,eAAe,CAAAJ,eAAA,CAAfI,eAAe,CACpD,IAAAC,UAAA,CAA8B3B,QAAQ,CAAC,CAAC,CAAA4B,UAAA,CAAAT,cAAA,CAAAQ,UAAA,IAAjCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAE1B,GAAM,CAAAG,gBAAgB,CAAG3B,GAAG,CAAC4B,MAAM,CAAC,CAClCC,aAAa,CAAE7B,GAAG,CACf8B,MAAM,CAAC,CAAC,CACRC,GAAG,CAAC,CAAC,CAAE,kCAAkC,CAAC,CAC1CC,QAAQ,CAAC,4BAA4B,CAAC,CACtCC,SAAS,CAAC,qCAAqC,CACpD,CAAC,CAAC,CAEF,GAAM,CAAAC,MAAM,CAAGnC,SAAS,CAAC,CACvBoC,aAAa,CAAE,CACbN,aAAa,CAAE,EACjB,CAAC,CAEDF,gBAAgB,CAAEA,gBAAgB,CAElCS,QAAQ,CAAE,SAAAA,SAAA,CAAM,CACd;AACA,GAAI,CAACf,YAAY,CAAE,CACjBjB,KAAK,CAACiC,KAAK,CAAC,+CAA+C,CAAC,CAC5D,OACF,CAEA,GAAM,CAAAC,SAAS,CAAGC,UAAU,CAACL,MAAM,CAACM,MAAM,CAACX,aAAa,CAAC,CACzD,GAAI,CAAAY,UAAU,CAAG,CAAC,CAClB,GAAM,CAAAC,OAAO,CAAGvB,IAAI,CAACwB,GAAG,CAAC,SAACC,CAAC,CAAK,CAC9B,GAAIA,CAAC,CAACC,KAAK,GAAKxB,YAAY,CAACwB,KAAK,CAAE,CAClCD,CAAC,CAACnB,OAAO,EAAIa,SAAS,CACtBG,UAAU,CAAGG,CAAC,CAACnB,OAAO,CACtB,GAAM,CAAAqB,cAAc,CAAGzC,iBAAiB,CAAC,SAAS,CAAEiC,SAAS,CAAC,CAC9DM,CAAC,CAACG,kBAAkB,CAACC,IAAI,CAACF,cAAc,CAAC,CACzCpB,UAAU,CAACkB,CAAC,CAACnB,OAAO,CAAC,CACvB,CACA,MAAO,CAAAmB,CAAC,CACV,CAAC,CAAC,CAEFxB,OAAO,CAACsB,OAAO,CAAC,CAChBpB,eAAe,CAAC,SAAC2B,IAAI,SAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAExB,OAAO,CAAEgB,UAAU,IAAG,CAAC,CAC7DP,MAAM,CAACiB,SAAS,CAAC,CAAC,CAClB/C,KAAK,CAACgD,OAAO,CAAC,oBAAoB,CAAC,CACnC,OACF,CACF,CAAC,CAAC,CAEF;AACAvD,SAAS,CAAC,UAAM,CACd,GAAIwB,YAAY,CAAE,CAChBK,UAAU,CAACL,YAAY,CAACI,OAAO,CAAC,CAClC,CACF,CAAC,CAAE,CAACJ,YAAY,CAAC,CAAC,CAElB;AACAxB,SAAS,CAAC,UAAM,CACd,GAAQ,CAAAgC,aAAa,CAAKK,MAAM,CAACM,MAAM,CAA/BX,aAAa,CAErB,GAAIA,aAAa,CAACwB,IAAI,CAAC,CAAC,CAACC,MAAM,CAAG,CAAC,CAAE,CACnCrC,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,IAAM,CACLA,aAAa,CAAC,IAAI,CAAC,CACrB,CACF,CAAC,CAAE,CAACiB,MAAM,CAACM,MAAM,CAAC,CAAC,CAEnB,GAAM,CAAAe,YAAY,CAAG,CACnBC,KAAK,CAAE,aACT,CAAC,CAED,mBACEjD,IAAA,CAAAE,SAAA,EAAAgD,QAAA,CACG,CAACpC,YAAY,cACZV,KAAA,CAAAF,SAAA,EAAAgD,QAAA,eACElD,IAAA,OAAAkD,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBlD,IAAA,MAAAkD,QAAA,CAAG,8BAA4B,CAAG,CAAC,EACnC,CAAC,cAEHlD,IAAA,QAAKmD,SAAS,CAAC,MAAM,CAACC,KAAK,CAAEJ,YAAa,CAAAE,QAAA,cACxC9C,KAAA,QAAK+C,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB9C,KAAA,QAAK+C,SAAS,CAAC,KAAK,CAAAD,QAAA,eAClBlD,IAAA,OAAAkD,QAAA,CAAI,SAAO,CAAI,CAAC,cAChB9C,KAAA,OAAI+C,SAAS,CAAC,YAAY,CAAAD,QAAA,EAAC,UACjB,cAAA9C,KAAA,SAAA8C,QAAA,EAAM,GAAC,CAAChC,OAAO,EAAO,CAAC,EAC7B,CAAC,EACF,CAAC,cACNd,KAAA,QAAA8C,QAAA,eACElD,IAAA,CAACJ,GAAG,EAACyD,CAAC,CAAE,CAAE,CAAAH,QAAA,cACRlD,IAAA,CAACL,SAAS,EACRwD,SAAS,CAAC,2BAA2B,CACrCG,EAAE,CAAC,eAAe,CAClBC,IAAI,CAAC,eAAe,CACpBC,KAAK,CAAC,gBAAgB,CACtBC,KAAK,CAAE9B,MAAM,CAACM,MAAM,CAACX,aAAc,CACnCoC,QAAQ,CAAE/B,MAAM,CAACgC,YAAa,CAC9B7B,KAAK,CACHH,MAAM,CAACiC,OAAO,CAACtC,aAAa,EAC5BuC,OAAO,CAAClC,MAAM,CAACmC,MAAM,CAACxC,aAAa,CACpC,CACDyC,UAAU,CACRpC,MAAM,CAACiC,OAAO,CAACtC,aAAa,EAAIK,MAAM,CAACmC,MAAM,CAACxC,aAC/C,CACF,CAAC,CACC,CAAC,cACNtB,IAAA,CAACJ,GAAG,EAACyD,CAAC,CAAE,CAAE,CAAAH,QAAA,cACRlD,IAAA,CAACN,MAAM,EACLsE,OAAO,CAAC,WAAW,CACnBC,OAAO,CAAEtC,MAAM,CAACuC,YAAa,CAC7BC,QAAQ,CAAE1D,UAAW,CAAAyC,QAAA,CACtB,SAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,EACH,CAAC,CACH,CACN,CACD,CAAC,CAEP,CAAC,CAED,cAAe,CAAA7C,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}