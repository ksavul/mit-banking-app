{"ast":null,"code":"import _objectSpread from\"/Users/fastnet/devedu/MIT/banking-application-fe/banking-app/mit-banking-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/fastnet/devedu/MIT/banking-application-fe/banking-app/mit-banking-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import useUserContext from\"../hooks/useUserContext\";import{useFormik}from\"formik\";import*as yup from\"yup\";import{toast}from\"react-toastify\";import createTransaction from\"../helpers/createTransaction\";import{Button,TextField,Box}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Withdraw=function Withdraw(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isDisabled=_useState2[0],setIsDisabled=_useState2[1];var _useUserContext=useUserContext(),user=_useUserContext.user,setUser=_useUserContext.setUser,loggedInUser=_useUserContext.loggedInUser,setLoggedInUser=_useUserContext.setLoggedInUser;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),balance=_useState4[0],setBalance=_useState4[1];var validationSchema=yup.object({withdrawAmount:yup.number().min(1,\"Must be greater or equal than $1\").max(loggedInUser.balance,\"Insufficient Funds\").required(\"Withdraw Amount is required\").typeError(\"The withdraw amount must be a number\")});var formik=useFormik({initialValues:{withdrawAmount:\"\"},validationSchema:validationSchema,onSubmit:function onSubmit(){//Verify if there's logged in user\nif(!loggedInUser){toast.error(\"Please login to make a successful transaction\");return;}var witAmount=parseFloat(formik.values.withdrawAmount);if(witAmount>loggedInUser.balance){toast.warn(\"Insufficient Funds\");return;}var newBalance=0;var newData=user.map(function(u){if(u.email===loggedInUser.email){u.balance-=witAmount;newBalance=u.balance;var newTransaction=createTransaction(\"Withdraw\",witAmount);u.transactionHistory.push(newTransaction);setBalance(u.balance);}return u;});setUser(newData);setLoggedInUser(function(prev){return _objectSpread(_objectSpread({},prev),{},{balance:newBalance});});formik.resetForm();toast.success(\"Withdraw succesful\");return;}});//Get initial balance\nuseEffect(function(){if(loggedInUser){setBalance(loggedInUser.balance);}},[loggedInUser]);//Listen for formik values changes\nuseEffect(function(){var withdrawAmount=formik.values.withdrawAmount;if(withdrawAmount.trim().length>0){setIsDisabled(false);}else{setIsDisabled(true);}},[formik.values]);var customStyles={width:\"fit-content\"};return/*#__PURE__*/_jsx(_Fragment,{children:!loggedInUser?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Withdraw\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please login to your account\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:customStyles,children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Withdraw\"}),/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[\"Balance \",/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",balance]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Box,{m:2,children:/*#__PURE__*/_jsx(TextField,{className:\"text-box custom-input-box\",id:\"withdrawAmount\",name:\"withdrawAmount\",label:\"Withdraw Amount\",value:formik.values.withdrawAmount,onChange:formik.handleChange,error:formik.touched.withdrawAmount&&Boolean(formik.errors.withdrawAmount),helperText:formik.touched.withdrawAmount&&formik.errors.withdrawAmount})}),/*#__PURE__*/_jsx(Box,{m:2,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:formik.handleSubmit,disabled:isDisabled,children:\"Withdraw\"})})]})]})})});};export default Withdraw;","map":{"version":3,"names":["useState","useEffect","useUserContext","useFormik","yup","toast","createTransaction","Button","TextField","Box","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Withdraw","_useState","_useState2","_slicedToArray","isDisabled","setIsDisabled","_useUserContext","user","setUser","loggedInUser","setLoggedInUser","_useState3","_useState4","balance","setBalance","validationSchema","object","withdrawAmount","number","min","max","required","typeError","formik","initialValues","onSubmit","error","witAmount","parseFloat","values","warn","newBalance","newData","map","u","email","newTransaction","transactionHistory","push","prev","_objectSpread","resetForm","success","trim","length","customStyles","width","children","className","style","m","id","name","label","value","onChange","handleChange","touched","Boolean","errors","helperText","variant","onClick","handleSubmit","disabled"],"sources":["/Users/fastnet/devedu/MIT/banking-application-fe/banking-app/mit-banking-app/src/components/Withdraw.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport useUserContext from \"../hooks/useUserContext\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport { toast } from \"react-toastify\";\n\nimport createTransaction from \"../helpers/createTransaction\";\n\nimport { Button, TextField, Box } from \"@mui/material\";\nconst Withdraw = () => {\n  const [isDisabled, setIsDisabled] = useState(true);\n  const { user, setUser, loggedInUser, setLoggedInUser } = useUserContext();\n  const [balance, setBalance] = useState();\n\n  const validationSchema = yup.object({\n    withdrawAmount: yup\n      .number()\n      .min(1, \"Must be greater or equal than $1\")\n      .max(loggedInUser.balance, \"Insufficient Funds\")\n      .required(\"Withdraw Amount is required\")\n      .typeError(\"The withdraw amount must be a number\"),\n  });\n\n  const formik = useFormik({\n    initialValues: {\n      withdrawAmount: \"\",\n    },\n\n    validationSchema: validationSchema,\n\n    onSubmit: () => {\n      //Verify if there's logged in user\n      if (!loggedInUser) {\n        toast.error(\"Please login to make a successful transaction\");\n        return;\n      }\n\n      const witAmount = parseFloat(formik.values.withdrawAmount);\n\n      if (witAmount > loggedInUser.balance) {\n        toast.warn(\"Insufficient Funds\");\n        return;\n      }\n\n      let newBalance = 0;\n\n      const newData = user.map((u) => {\n        if (u.email === loggedInUser.email) {\n          u.balance -= witAmount;\n          newBalance = u.balance;\n          const newTransaction = createTransaction(\"Withdraw\", witAmount);\n          u.transactionHistory.push(newTransaction);\n          setBalance(u.balance);\n        }\n        return u;\n      });\n\n      setUser(newData);\n      setLoggedInUser((prev) => ({ ...prev, balance: newBalance }));\n      formik.resetForm();\n      toast.success(\"Withdraw succesful\");\n      return;\n    },\n  });\n\n  //Get initial balance\n  useEffect(() => {\n    if (loggedInUser) {\n      setBalance(loggedInUser.balance);\n    }\n  }, [loggedInUser]);\n\n  //Listen for formik values changes\n  useEffect(() => {\n    const { withdrawAmount } = formik.values;\n\n    if (withdrawAmount.trim().length > 0) {\n      setIsDisabled(false);\n    } else {\n      setIsDisabled(true);\n    }\n  }, [formik.values]);\n\n  const customStyles = {\n    width: \"fit-content\",\n  };\n  return (\n    <>\n      {!loggedInUser ? (\n        <>\n          <h3>Withdraw</h3>\n          <p>Please login to your account</p>\n        </>\n      ) : (\n        <div className=\"card\" style={customStyles}>\n          <div className=\"card-body\">\n            <div className=\"row\">\n              <h3>Withdraw</h3>\n              <h5 className=\"card-title\">\n                Balance <span>${balance}</span>\n              </h5>\n            </div>\n            <div>\n              <Box m={2}>\n                <TextField\n                  className=\"text-box custom-input-box\"\n                  id=\"withdrawAmount\"\n                  name=\"withdrawAmount\"\n                  label=\"Withdraw Amount\"\n                  value={formik.values.withdrawAmount}\n                  onChange={formik.handleChange}\n                  error={\n                    formik.touched.withdrawAmount &&\n                    Boolean(formik.errors.withdrawAmount)\n                  }\n                  helperText={\n                    formik.touched.withdrawAmount &&\n                    formik.errors.withdrawAmount\n                  }\n                />\n              </Box>\n              <Box m={2}>\n                <Button\n                  variant=\"contained\"\n                  onClick={formik.handleSubmit}\n                  disabled={isDisabled}\n                >\n                  Withdraw\n                </Button>\n              </Box>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Withdraw;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}